---
title: "An outbreak of gastroenteritis in Stegen, Germany, June 1998"
author: "Janetta Skarp, Zhian N. Kamvar, Alexander Spina, Patrick Keating and Thibaut Jombart"
authors: ["Thibaut Jombart", "Janetta Skarp", "Zhian N. Kamvar", "Alexander Spina", "Patrick Keating"]
categories:
tags: ["level: beginner", "epicurve", "single variable analysis", "2x2 tables", "gastroenteritis"]
date: 2018-10-24
slug: stegen
licenses: CC-BY
image: img/highres/graduation-1965.jpg
showonlyimage: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Context

On 26 June 1998, the St Sebastian High School in Stegen (school A), Germany,
celebrated a graduation party, where 250 to 350 participants were
expected. Attendants included graduates from that school, their families and
friends, teachers, 12th grade students and some graduates from a nearby school
(school B).

A self-service party buffet was supplied by a commercial caterer in
Freiburg. Food was prepared the day of the party and transported in a
refrigerated van to the school.

Festivities started with a dinner buffet open from 8.30 pm onwards and were
followed by a dessert buffet offered from 10 pm. The party and the buffet
extended late during the night and alcoholic beverages were quite popular. All
agreed it was a party to be remembered.



## The alert

On 2nd July 1998, the Freiburg local health office reported to the Robert Koch
Institute (RKI) in Berlin the occurrence of many cases of gastroenteritis
following the graduation party described above. More than 100 cases were
suspected among participants and some of them were admitted to nearby
hospitals. Sick people suffered from fever, nausea, diarrhoea and vomiting
lasting for several days. Most believed that the tiramisu consumed at dinner was
responsible for their illness. *Salmonella enteritidis* was isolated from 19
stool samples.

The Freiburg health office sent a team to investigate the kitchen of the
caterer. Food preparation procedures were reviewed. Food samples, except
tiramisu (none was left over), were sent to the laboratory of Freiburg
University. Microbiological analyses were performed on samples of the following:
brown chocolate mousse, caramel cream, remoulade sauce, yoghurt dill sauce, and
10 raw eggs.

The Freiburg health office requested help from the RKI in the investigation to
assess the magnitude of the outbreak and identify potential vehicle(s) and risk
factors for transmission in order to better control the outbreak



## The study

Cases were defined as any person who had attended the party at St Sebastian High
School who suffered from diarrhoea (min. 3 loose stool for 24 hours) between 27
June and 29 June 1998; or who suffered from at least three of the following
symptoms: vomiting, fever over 38.5Â° C, nausea, abdominal pain, headache.

Students from both schools attending the party were asked through phone
interviews to provide names of persons who attended the party.

Overall, 291 responded to enquiries and 103 cases were identified.




# First look at the data

## Importing data from Excel

## Overview and summaries

## Graphics

## Data cleaning



```{r stegen-4, eval = FALSE}
stegen_data <- read.csv(here::here("data", "stegen_raw.csv"), stringsAsFactors = FALSE)
```

```{r stegen-4.1, results = 'hide', echo = FALSE}
stegen_data <- read.csv(here::here("static", "data", "stegen_raw.csv"), stringsAsFactors = FALSE)
```

</details>

<details>
<summary> <b> c) Browse your dataset </b> </summary>

*RStudio* has the nice feature that everything is in one browser window, so you
can browse your dataset and your code without having to switch between browser
windows.

```{r stegen-5, eval = FALSE}
# to browse your data, use the View command
View(stegen_data)
```

Alternatively, you can also view your dataset by clicking on **stegen_data** in
the top right "global environment" panel of your *RStudio* browser.  Your global
environment is where you can see all the datasets, functions and other things
you have loaded in the current session.

</details>

<details>
<summary> <b> d) Recode data </b> </summary>

Use the "describe" command to assess your data and identify variables with
missing values. The describe command showed that the variables salmon, pork and
horseradish have a few records with a value of 9. These need to be recoded to
NA.

* Using the square brackets "`[...]`" after a variable allows you to subset for certain observations. To recode values of 9 to NA for the pork variable, select observations where pork **(`stegen_data$pork`)** is equal to 9 **`[stegen_data$pork == 9]`** and set these observations equal to NA 
    
* Always use the double equals "`==`" within square brackets; this a logical (Boolean) operator

* Use "`!=`" when you want to write "not equal to"

```{r stegen-8, eval = TRUE}
# The first line below is read as follows:  assign a value of NA to stegen_data$pork WHERE stegen_data$pork is equal to 9
stegen_data$pork[stegen_data$pork == 9] <- NA

stegen_data$salmon[stegen_data$salmon == 9] <- NA

stegen_data$horseradish[stegen_data$horseradish == 9] <- NA
```

</details>

<details>
<summary> <b> e) Save your new dataset </b> </summary>

```{r stegen-10, eval = FALSE}
write.csv(stegen_data, file = here::here("data", "stegen_clean.csv"))
```

</details>




<br>

# About this document

## Source

This case study was first designed by Alain Moren and Gilles Desve, EPIET. It is
based on an investigation conducted by Anja Hauri, RKI, Berlin, 1998.

## Contributors

- original version: Alain Moren, Gilles Desve

- reviewers, previous versions: Marta Valenciano, Alain Moren

- adaptation for EPIET module: Alicia Barrasa, Ioannis Karagiannis

- translation to R: Alexander Spina, Patrick Keating, Janetta Skarp, Zhian N. Kamvar, Thibaut Jombart


Contributions are welcome via [pull
requests](https://github.com/reconhub/learn/pulls). The source file can be found
[here](https://github.com/reconhub/learn/blob/master/static/slides/outbreaker2/outbreaker2.Rmd).



## Legal stuff

**License**: [CC-BY](https://creativecommons.org/licenses/by/3.0/)
**Copyright**: 2018 
